{
  suite_name: "Gemini Batch Generate Content",
  provider: "gemini",
  endpoint: "/v1beta/models/gemini-3-flash-preview:batchGenerateContent",
  method: "POST",
  base_params: {
    requests: [
      {
        contents: [
          {
            parts: [
              {
                text: "Hello",
              },
            ],
          },
        ],
      },
    ],
  },
  response_schema: "gemini.BatchCreateResponse",
  tests: [
    {
      name: "test_batch_baseline",
      description: "Baseline batch request",
      is_baseline: true,
      params: {},
    },
    {
      name: "test_batch_multiple_requests",
      description: "Batch with multiple requests",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "Hello",
                  },
                ],
              },
            ],
          },
          {
            contents: [
              {
                parts: [
                  {
                    text: "How are you?",
                  },
                ],
              },
            ],
          },
          {
            contents: [
              {
                parts: [
                  {
                    text: "Tell me a joke",
                  },
                ],
              },
            ],
          },
        ],
      },
      test_param: {
        name: "requests",
        value: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "Hello",
                  },
                ],
              },
            ],
          },
          {
            contents: [
              {
                parts: [
                  {
                    text: "How are you?",
                  },
                ],
              },
            ],
          },
          {
            contents: [
              {
                parts: [
                  {
                    text: "Tell me a joke",
                  },
                ],
              },
            ],
          },
        ],
      },
    },
    {
      name: "test_batch_with_display_name",
      description: "Batch with displayName",
      params: {
        config: {
          displayName: "test-batch-001",
        },
      },
      test_param: {
        name: "config",
        value: {
          displayName: "test-batch-001",
        },
      },
    },
    {
      name: "test_batch_with_generation_config",
      description: "Batch with generationConfig",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "Hello",
                  },
                ],
              },
            ],
            generationConfig: {
              temperature: 0.7,
              maxOutputTokens: 100,
            },
          },
        ],
      },
      test_param: {
        name: "requests[0].generationConfig",
        value: null,
      },
    },
    {
      name: "test_batch_with_safety_settings",
      description: "Batch with safetySettings",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "Hello",
                  },
                ],
              },
            ],
            safetySettings: [
              {
                category: "HARM_CATEGORY_HARASSMENT",
                threshold: "BLOCK_MEDIUM_AND_ABOVE",
              },
            ],
          },
        ],
      },
      test_param: {
        name: "requests[0].safetySettings",
        value: null,
      },
    },
    {
      name: "test_batch_with_system_instruction",
      description: "Batch with systemInstruction",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "Hello",
                  },
                ],
              },
            ],
            systemInstruction: {
              parts: [
                {
                  text: "You are a helpful assistant.",
                },
              ],
            },
          },
        ],
      },
      test_param: {
        name: "requests[0].systemInstruction",
        value: null,
      },
    },
    {
      name: "test_batch_with_text_content",
      description: "Batch with multiple text requests",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "What is the capital of France?",
                  },
                ],
              },
            ],
          },
          {
            contents: [
              {
                parts: [
                  {
                    text: "What is the capital of Japan?",
                  },
                ],
              },
            ],
          },
        ],
      },
      test_param: {
        name: "requests",
        value: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "What is the capital of France?",
                  },
                ],
              },
            ],
          },
          {
            contents: [
              {
                parts: [
                  {
                    text: "What is the capital of Japan?",
                  },
                ],
              },
            ],
          },
        ],
      },
    },
    {
      name: "test_batch_with_inline_image",
      description: "Batch with inline image",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "Describe this image",
                  },
                  {
                    inlineData: {
                      mimeType: "image/png",
                      data: "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",
                    },
                  },
                ],
              },
            ],
          },
        ],
      },
      test_param: {
        name: "requests[0].contents[0].parts[1].inlineData",
        value: null,
      },
    },
    {
      name: "test_batch_with_function_calling",
      description: "Batch with function calling",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "What's the weather in Tokyo?",
                  },
                ],
              },
            ],
            tools: [
              {
                functionDeclarations: [
                  {
                    name: "get_weather",
                    description: "Get current weather",
                    parameters: {
                      type: "object",
                      properties: {
                        location: {
                          type: "string",
                        },
                      },
                      required: [
                        "location",
                      ],
                    },
                  },
                ],
              },
            ],
          },
        ],
      },
      test_param: {
        name: "requests[0].tools",
        value: null,
      },
    },
    {
      name: "test_batch_with_json_response_format",
      description: "Batch with JSON output",
      params: {
        requests: [
          {
            contents: [
              {
                parts: [
                  {
                    text: "List 3 colors",
                  },
                ],
              },
            ],
            generationConfig: {
              responseMimeType: "application/json",
            },
          },
        ],
      },
      test_param: {
        name: "requests[0].generationConfig.responseMimeType",
        value: null,
      },
    },
    {
      name: "test_batch_size_variants",
      description: "Batch size variants",
      params: {
        requests: "$requests",
      },
      parameterize: {
        requests: [
          [
            {
              contents: [
                {
                  parts: [
                    {
                      text: "R1",
                    },
                  ],
                },
              ],
            },
          ],
          [
            {
              contents: [
                {
                  parts: [
                    {
                      text: "R1",
                    },
                  ],
                },
              ],
            },
            {
              contents: [
                {
                  parts: [
                    {
                      text: "R2",
                    },
                  ],
                },
              ],
            },
            {
              contents: [
                {
                  parts: [
                    {
                      text: "R3",
                    },
                  ],
                },
              ],
            },
          ],
        ],
      },
      test_param: {
        name: "requests",
        value: "$requests",
      },
    },
  ],
}
