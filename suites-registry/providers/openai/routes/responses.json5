{
  suite_name: "OpenAI Responses",
  endpoint: "/v1/responses",
  schemas: {
    response: "openai.ResponseObject",
    stream_chunk: "openai.ResponsesStreamEvent",
  },
  method: "POST",
  stream_expectations: {
    // OpenAI Responses streaming ends with "data: [DONE]" (parser maps it to "[DONE]").
    min_observations: 1,
    checks: [
      {
        type: "required_sequence",
        values: [
          "response.created",
          "response.output_item.added",
          "response.content_part.added",
          "response.output_text.delta",
          "response.output_text.done",
          "response.content_part.done",
          "response.output_item.done",
          "response.completed",
          "[DONE]",
        ],
      },
      {
        type: "required_terminal",
        value: "[DONE]",
      },
    ],
  },
  tests: [
    {
      name: "baseline",
      description: "Baseline test: only required parameters",
      params: {
        input: [{ role: "user", content: "hi" }],
        stream:true
      },
      baseline: true,
      check_stream:true
    },
    {
      name: "input",
      description: "Test input parameter variants",
      variants: {
        input_variant: [
          {
            variant_id: "string",
            value: "Hello, how are you?",
          },
          {
            variant_id: "array_text",
            value: [
              {
                type: "message",
                role: "user",
                content: "Say hello",
              },
            ],
          },
        ],
      },
      params: {
        input: "$input_variant.value",
      },
      focus_param: {
        name: "input",
        value: "$input_variant.value",
      },
    },
    {
      name: "instructions",
      description: "Test instructions parameter",
      params: {
        instructions: "You are a helpful assistant.",
          stream:true
      },
      check_stream:true,
      focus_param: {
        name: "instructions",
        value: "You are a helpful assistant.",
      },
    },
    {
      name: "temperature",
      description: "Test temperature parameter",
      params: {
        temperature: 0.7,
      },
      focus_param: {
        name: "temperature",
        value: 0.7,
      },
    },
    {
      name: "top_p",
      description: "Test top_p parameter",
      params: {
        top_p: 0.9,
      },
      focus_param: {
        name: "top_p",
        value: 0.9,
      },
    },
    {
      name: "max_output_tokens",
      description: "Test max_output_tokens parameter",
      params: {
        max_output_tokens: 100,
      },
      focus_param: {
        name: "max_output_tokens",
        value: 100,
      },
    },
    {
      name: "metadata",
      description: "Test metadata parameter",
      params: {
        metadata: {
          user_id: "123",
          session: "abc",
        },
      },
      focus_param: {
        name: "metadata",
        value: {
          user_id: "123",
          session: "abc",
        },
      },
    },
    {
      name: "text.format.type",
      description: "Test text.format.type variants",
      variants: {
        format_variant: [
          {
            variant_id: "text",
            input: "Say hello",
            format: {
              type: "text",
            },
            value: "text",
          },
          {
            variant_id: "json_object",
            input: "Return JSON: {\"status\": \"ok\"}",
            format: {
              type: "json_object",
            },
            value: "json_object",
          },
          {
            variant_id: "json_schema",
            input: "Generate a person's info",
            format: {
              type: "json_schema",
              schema: {
                type: "object",
                properties: {
                  name: {
                    type: "string",
                  },
                  age: {
                    type: "number",
                  },
                },
                required: [
                  "name",
                  "age",
                ],
              },
            },
            value: "json_schema",
          },
        ],
      },
      params: {
        input: "$format_variant.input",
        text: {
          format: "$format_variant.format",
        },
      },
      focus_param: {
        name: "text.format.type",
        value: "$format_variant.value",
      },
    },
    {
      name: "tools",
      description: "Test tools parameter variants",
      variants: {
        tool_variant: [
          {
            variant_id: "function",
            input: "What's the weather in Beijing?",
            value: [
              {
                type: "function",
                "function": {
                  name: "get_weather",
                  description: "Get current weather",
                  parameters: {
                    type: "object",
                    properties: {
                      location: {
                        type: "string",
                        description: "City name",
                      },
                    },
                    required: [
                      "location",
                    ],
                  },
                },
              },
            ],
          },
          {
            variant_id: "file_search",
            input: "Search for documentation",
            value: [
              {
                type: "file_search",
              },
            ],
          },
          {
            variant_id: "web_search",
            input: "Search the web for latest news",
            value: [
              {
                type: "web_search",
              },
            ],
          },
          {
            variant_id: "code_interpreter",
            input: "Calculate 15 * 27",
            value: [
              {
                type: "code_interpreter",
              },
            ],
          },
        ],
      },
      params: {
        input: "$tool_variant.input",
        tools: "$tool_variant.value",
      },
      focus_param: {
        name: "tools",
        value: "$tool_variant.value",
      },
    },
    {
      name: "tool_choice",
      description: "Test different tool_choice values",
      variants: {
        tool_choice: [
          "none",
          "auto",
          "required",
        ],
      },
      params: {
        input: "What's the weather?",
        tools: [
          {
            type: "function",
            "function": {
              name: "get_weather",
              description: "Get weather",
              parameters: {
                type: "object",
                properties: {
                  location: {
                    type: "string",
                  },
                },
                required: [
                  "location",
                ],
              },
            },
          },
        ],
        tool_choice: "$tool_choice",
      },
      focus_param: {
        name: "tool_choice",
        value: "$tool_choice",
      },
    },
    {
      name: "parallel_tool_calls",
      description: "Test parallel_tool_calls parameter",
      params: {
        input: "Call functions",
        tools: [
          {
            type: "function",
            "function": {
              name: "func1",
              description: "Function 1",
              parameters: {
                type: "object",
                properties: {},
              },
            },
          },
        ],
        parallel_tool_calls: true,
      },
      focus_param: {
        name: "parallel_tool_calls",
        value: true,
      },
    },
    {
      name: "store",
      description: "Test store parameter",
      params: {
        store: false,
      },
      focus_param: {
        name: "store",
        value: false,
      },
    },
    {
      name: "service_tier",
      description: "Test service_tier parameter",
      params: {
        service_tier: "auto",
      },
      focus_param: {
        name: "service_tier",
        value: "auto",
      },
    },
    {
      name: "safety_identifier",
      description: "Test safety_identifier parameter",
      params: {
        safety_identifier: "user_hash_123",
      },
      focus_param: {
        name: "safety_identifier",
        value: "user_hash_123",
      },
    },
    {
      name: "max_tool_calls",
      description: "Test max_tool_calls parameter",
      params: {
        input: "Search for information",
        tools: [
          {
            type: "web_search",
          },
        ],
        max_tool_calls: 5,
      },
      focus_param: {
        name: "max_tool_calls",
        value: 5,
      },
    },
    {
      name: "truncation",
      description: "Test truncation parameter",
      params: {
        truncation: "auto",
      },
      focus_param: {
        name: "truncation",
        value: "auto",
      },
    },
    {
      name: "stream",
      description: "Test basic streaming response",
      params: {
        stream: true,
      },
      check_stream: true,
      focus_param: {
        name: "stream",
        value: true,
      },
    },
  ],
}
